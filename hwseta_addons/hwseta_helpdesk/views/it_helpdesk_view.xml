<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record
        id="action_it_helpdesk_ticket_kanban_from_dashboard"
        model="ir.actions.act_window"
    >
        <field name="name">Helpdesk Ticket</field>
        <field name="res_model">seta.it.helpdesk</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="context">
            {'default_it_team_id': active_id}
        </field>
        <field name="domain">[('it_team_id', '=', active_id)]</field>
    </record>

<!--    It hepdesk users Views-->



    <record id="ticket_it_view_form" model="ir.ui.view">
        <field name="name">it.helpdesk.ticket.it.view.form</field>
        <field name="model">seta.it.helpdesk</field>
        <field name="groups_id" eval="[(6, 0, [ref('group_it_helpdesk_internal_user')])]"/>
        <field name="arch" type="xml">
            <form string="IT Helpdesk Ticket" create="0" edit="0" duplicate="false" class="hwseta-hide-chatter-mail">
                <field name="is_cancelled" invisible = '1'/>
                <field name="is_closed" invisible = '1'/>
                <field name="is_done" invisible = '1'/>
                <field name="is_new" invisible = '1'/>
                <field name="allowed_value_ids" invisible = '1'/>
                <field name="is_in_transferred_stage" invisible = '1'/>
                <field name="is_transfered_to_erp" invisible = '1'/>
                <field name="is_transfered_to_it" invisible = '1'/>
                <header>
                    <button string="Save" special="save" class="btn btn-primary" data-hotkey="s" invisible="id != False" help="Click to save changes"/>
                    <button string="Discard" special="cancel" class="btn btn-secondary" data-hotkey="d" invisible="id != False" help="Click to discard changes" />

                    <button string="Cancel Ticket"
                            name="cancel_ticket_it"
                            type="object"
                            confirm="Are you sure you want to cancel the ticket?"
                            invisible= "user_id != False or is_cancelled ==True or is_done == True or is_new == False or id == False "/>
                    <button string="Close Ticket"
                            name="close_ticket_it"
                            type="object"
                            class="btn-danger"
                            confirm="Are you sure you want to close the ticket?"
                            invisible= "is_closed == True or is_done == True or is_cancelled == True or (is_new == True and user_id == False) or is_transfered_to_erp == True or is_transfered_to_it == True or is_in_transferred_stage == True "/>
                    <button string="Reopen Ticket"
                            name="reopen_ticket_it"
                            type="object"
                            class="btn-danger"
                            confirm="Are you sure you want to Reopen the ticket?"
                            invisible = "is_done != True"/>



                    <field name="stage_id" widget="statusbar"  options="{'clickable': False}" invisible = "is_in_transferred_stage == True"/>
                </header>
                <sheet>
<!--                    <div class="oe_button_box" name="button_box">-->
<!--                        <button name="toggle_active" type="object" class="oe_stat_button" icon="fa-archive">-->
<!--                            <field name="active" widget="boolean_button" options='{"terminology": "archive"}'/>-->
<!--                        </button>-->
<!--                    </div>-->
                    <div invisible="is_in_transferred_stage != True">
                        <h1><span style="color: #ff0000;"><strong>Transfered to the ERP Helpdesk</strong></span></h1>
                    </div>
                    <div class="oe_title">
                        <h1 class="oe_title">
                            <field name="number"/>
                        </h1>
                        <h2 class="o_row">
                            <field name="name"  placeholder="Summary"/>
                        </h2>

                    </div>
                    <group name="main">
                        <group>
                            <field name="it_team_id" widget="selection" options="{'no_create': True, 'no_create_edit':True,'no_open':True,'always_reload': True}" required="1" force_save="1"/>
                            <field name="user_ids" invisible="1" readonly="1" />
                            <field name="user_id" options="{'no_create': True, 'no_create_edit':True,'no_open':True,'always_reload': True}" readonly="1" force_save="1"/>
                            <field name="priority" invisible="0"/>
                            <field name="impact" invisible="0"/>
                            <field name="urgency" invisible="0"/>
                            <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                            <field name="create_date" readonly="1"/>
                            <field name="channel_id" invisible="1"/>
                            <field name="erp_helpdesk_id" string="Transferred Record" invisible="erp_helpdesk_id == False" readonly="1"/>
                        </group>
                        <group>
<!--                            <field name="related_to" required ="0"/>-->
<!--                            <field name="stakeholder_type_id" string ="Stakeholder Type ID" required ="1" placeholder="eg. HW591xxxxxxxxx or Lxxxxxxxxx or Txxxxxxxxx"/>-->
<!--                            <field name="stakeholder_type_id" string ="Stakeholder Type ID" required ="1" attrs="{'invisible': [('stakeholder_type', '!=', 'moderator')]}" placeholder="eg. HW591MRxxxxxxx"/>-->
                            <field name="it_category_id" required ="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" string="Category *"/>
                            <field name="request_type_id" required ="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" string="Request Type *"/>
                            <field name="department_id" required ="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" string="Department *"/>
                            <field name="location_id" required ="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" string="Location *"/>
                            <field name="contact_number"/>
                            <field name="email_address" string = "Email Address *" required ="1" readonly="1"/>
                            <field name="province_id" domain="[('country_id', '=', 247)]" required ="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" string="Province *"/>
                            <field name="partner_id" invisible="1"/>
                            <field name="partner_name" invisible="1"/>
                            <field name="partner_email" invisible="1"/>
                            <field name="category_id" invisible="1"/>
<!--                            <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}" invisible="1"/>-->
                            <field name="sequence" groups="base.group_no_one" invisible="1"/>
                            <field name="due_date" required ="0"/>
                        </group>
                    </group>
                        <notebook>
                            <page string="Description" name="description">
                                <field name="description" widget="html" required ="1"/>
                            </page>
                            <page string="Other Information" name="other_info">
                                <group>
                                    <field name="last_stage_update" readonly="1"/>
                                    <field name="assigned_date" readonly="1"/>
                                    <field name="closed_date" readonly="1"/>
                                </group>
                            </page>
                        </notebook>
                </sheet>
                <chatter/>
<!--                <div class="oe_chatter">-->
<!--                    <field name="message_follower_ids" widget="mail_followers"/>-->
<!--                    <field name="activity_ids" widget="mail_activity"/>-->
<!--                    <field name="message_ids" widget="mail_thread"/>-->
<!--                </div>-->
            </form>
        </field>
    </record>

    <record id="ticket_it_view_tree" model="ir.ui.view">
        <field name="name">it.helpdesk.ticket.view.tree</field>
        <field name="model">seta.it.helpdesk</field>
        <field name="groups_id" eval="[(6, 0, [ref('group_it_helpdesk_internal_user')])]"/>
        <field name="arch" type="xml">
            <list import="false" create='true' edit="0" duplicate="0" delete="0" >
                <field name="number"/>
                <field name="name"/>
                <field name="user_id"/>
                <field name="stage_id"/>
                <field name="priority" widget="priority" options="{'clickable': False}" />
                <field name="urgency" widget="priority" options="{'clickable': False}" />
                <field name="impact" widget="priority" options="{'clickable': False}" />
                <field name="create_date" readonly="1"/>
                <field name="last_stage_update"/>
            </list>
        </field>
    </record>

    <record id="it_helpdesk_ticket_action" model="ir.actions.act_window">
            <field name="name">Tickets</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">seta.it.helpdesk</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('is_it_helpdesk','=',True)]</field>
            <field name="context">{'default_is_it_helpdesk': True,'default_it_team_id':1}</field>
        </record>

    <record id="action_ticket_it_tree_view" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">list</field>
			<field name="sequence">1</field>
            <field name="view_id" ref="ticket_it_view_tree"/>
            <field name="act_window_id" ref="it_helpdesk_ticket_action"/>
        </record>

	<record id="action_ticket_it_view_form" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
			<field name="sequence">2</field>
            <field name="view_id" ref="ticket_it_view_form"/>
            <field name="act_window_id" ref="it_helpdesk_ticket_action"/>
        </record>


    <!--    It helpdesk admin users view-->
<record id="it_helpdesk_ticket_view_search" model="ir.ui.view">
        <field name="name">it.helpdesk.ticket.view.search</field>
        <field name="model">seta.it.helpdesk</field>
        <field name="arch" type="xml">
            <search>
                <field
                    string="Ticket"
                    name="number"
                    filter_domain="['|',('number', 'ilike', self),('name', 'ilike', self)]"
                />
                <field name="partner_id" />
                <field name="user_id" />
                <field name="name" />
                <field name="tag_ids" />
                <field name="stage_id" />
                <filter
                    string="Unassigned"
                    name="unassigned"
                    domain="[('user_id','=',False)]"
                />
                <filter string="Open" name="open" domain="[('closed', '=', False )]" />
                <filter
                    string="Unattended"
                    name="unattended"
                    domain="[('unattended', '=', True )]"
                />
                <filter
                    string="High Priority"
                    name="high_priority"
                    domain="[('priority','=','3')]"
                />
                <separator />
<!--                <filter-->
<!--                    string="Archived"-->
<!--                    name="archived"-->
<!--                    domain="[('active','=',False)]"-->
<!--                />-->
<!--                <separator />-->
                <filter
                    string="My Tickets"
                    name="mytickets"
                    domain="[('user_id','=',uid)]"
                />
                <filter
                    string="My Followed Tickets"
                    name="my_followed_tickets"
                    domain="[('message_is_follower', '=', True)]"
                />
                <separator />
                <filter
                    name="last_week"
                    string="Last Week"
                    domain="[('create_date','&gt;', (context_today() - datetime.timedelta(weeks=1)).strftime('%%Y-%%m-%%d') )]"
                />
                <separator />
                <filter
                    string="My Activities"
                    name="activities_my"
                    domain="[('activity_ids.user_id', '=', uid)]"
                />
                <filter
                    string="Late Activities"
                    name="activities_overdue"
                    domain="[('activity_ids.date_deadline', '&lt;', context_today().strftime('%Y-%m-%d'))]"
                    help="Show all records which has next action date is before today"
                />
                <filter
                    string="Today Activities"
                    name="activities_today"
                    domain="[('activity_ids.date_deadline', '=', context_today().strftime('%Y-%m-%d'))]"
                />
                <filter
                    string="Future Activities"
                    name="activities_upcoming_all"
                    domain="[('activity_ids.date_deadline', '&gt;', context_today().strftime('%Y-%m-%d'))
                  ]"
                />
                <group expand="0" string="Group By">
                    <filter
                        string="Partner"
                        name="group_partner"
                        domain="[]"
                        context="{'group_by':'partner_id'}"
                    />
                    <filter
                        string="Team"
                        name="group_team"
                        domain="[]"
                        context="{'group_by':'it_team_id'}"
                    />
                    <filter
                        string="User"
                        name="group_user"
                        domain="[]"
                        context="{'group_by':'user_id'}"
                    />
                    <filter
                        string="Stage"
                        name="group_stage"
                        domain="[]"
                        context="{'group_by':'stage_id'}"
                    />
                    <filter
                        string="Tag"
                        name="group_tag"
                        domain="[]"
                        context="{'group_by':'tag_ids'}"
                    />
                </group>
            </search>
        </field>
    </record>

    <record id="ticket_it_admin_view_form" model="ir.ui.view">
        <field name="name">it.helpdesk.ticket.admin.view.form</field>
        <field name="model">seta.it.helpdesk</field>
        <field name="groups_id" eval="[(6, 0, [ref('group_it_helpdesk_Admin'),ref('group_it_helpdesk_manager')])]"/>
        <field name="arch" type="xml">
            <form string="Helpdesk Ticket" create="true" edit="true" duplicate="false" delete="0" class="hwseta-hide-chatter-mail">
                <field name="is_cancelled" invisible = '1'/>
                <field name="is_closed" invisible = '1'/>
                <field name="is_clickable" invisible = '1'/>
                <field name="is_done" invisible = '1'/>
                <field name="allowed_value_ids" invisible = '1'/>
                <field name="is_transfered_to_erp" invisible = '1'/>
                <field name="is_transfered_to_it" invisible = '1'/>
                <field name="is_done_it" invisible = '1'/>
                <field name="is_in_transferred_stage" invisible = '1'/>
                <field name="partner_id" invisible = '1'/>
                <header>
                    <button string="Assign to me"
                            name="assign_to_me"
                            type="object"
                            invisible = "user_id != False or is_transfered_to_erp == True or is_transfered_to_it == True or is_in_transferred_stage == True"/>
                    <button string="Reopen Ticket"
                            name="reopen_ticket_it"
                            type="object"
                            class="btn-danger"
                            confirm="Are you sure you want to Reopen the ticket?"
                            invisible = "is_done != True"/>
                    <button name="%(helpdesk_ticket_transfer_wizard_action)d" groups="hwseta_helpdesk.group_it_helpdesk_Admin,hwseta_helpdesk.group_it_helpdesk_manager" confirm="Please confirm if you want to transfer this ticket." string="Transfer To ERP Helpdesk" type="action" class="btn-primary" invisible="is_transfered_to_erp == True or is_transfered_to_it == True or is_in_transferred_stage == True or is_done == True or id == False or is_done_it==True" />
                    <field name="stage_id" domain="[('name', '!=', 'Transferred')]" widget="statusbar" options="{'clickable': True}" invisible="is_transfered_to_erp == True or is_in_transferred_stage == True or is_cancelled==True" readonly="is_done_it == True"/>

                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">

                    </div>
                    <div invisible="is_in_transferred_stage != True">
                        <h1><span style="color: #ff0000;"><strong>Transfered to the ERP Helpdesk</strong></span></h1>
                    </div>
                    <div class="oe_title">
                        <h1 class="oe_title">
                            <field name="number"/>
                        </h1>
                        <h2 class="o_row">
                            <field name="name" placeholder="Summary" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True"/>
                        </h2>

                    </div>
                    <group name="main">
                        <group>
<!--                            <field name="team_id" options="{'no_create': True, 'no_create_edit':True,'no_open':True,'always_reload': True}"/>-->
                            <field name="it_team_id" widget="selection" options="{'no_create': True, 'no_create_edit':True,'no_open':True,'always_reload': True}" required="1" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True" string="Team *"/>
                            <field name="user_ids" invisible="1" readonly="1" />
                            <field name="user_id" invisible = '0' options="{'no_create': True, 'no_create_edit':True,'no_open':True,'always_reload': True}" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True" />

                            <field name="priority" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True"/>
                            <field name="impact" invisible="0" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True"/>
                            <field name="urgency" invisible="0" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True"/>
                            <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True"/>
                            <field name="create_date" readonly="1"/>
                            <field name="channel_id" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" invisible="1" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True"/>
                            <field name="erp_helpdesk_id" string="Transfered Record" invisible="erp_helpdesk_id == False" readonly="1"/>
                        </group>
                        <group>

                            <field name="it_category_id" required ="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" string="Category *" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True"/>
                            <field name="request_type_id" required ="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True" string="Request Type *"/>
                            <field name="department_id" required ="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True" string="Department *"/>
                            <field name="location_id" required ="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True" string="Location *"/>
                            <field name="contact_number" readonly="contact_number != False or is_transfered_to_erp == True or is_in_transferred_stage == True"/>
                            <field name="email_address" string = "Email Address *" required="1" readonly="email_address != False or is_transfered_to_erp == True or is_in_transferred_stage == True"/>
                            <field name="province_id" domain="[('country_id', '=', 247)]" required="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}" readonly="province_id != False or is_transfered_to_erp == True or is_in_transferred_stage == True" force_save="1" string="Province *"/>
                            <field name="partner_id" readonly="1" options="{'no_create': True, 'no_create_edit':True,'no_open':True}"/>
                            <field name="partner_name" readonly="1" invisible="1" />
                            <field name="partner_email" readonly="1" invisible="1"/>
<!--                            <field name="category_id" options="{'no_create': True, 'no_create_edit':True,'no_open':True}"/>-->
<!--                            <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True"/>-->
                            <field name="sequence" groups="base.group_no_one" invisible="1"/>
                            <field name="due_date" required ="0" readonly="is_transfered_to_erp == True or is_in_transferred_stage == True"/>
                        </group>
                    </group>
                        <notebook>
                            <page string="Description" name="description">
                                <field name="description" widget="html" readonly="0"/>
                            </page>
                            <page string="Other Information" name="other_info">
                                <group>
                                    <field name="last_stage_update" readonly="1"/>
                                    <field name="assigned_date" readonly="1"/>
                                    <field name="closed_date" readonly="1"/>
                                </group>
                            </page>
                        </notebook>
                </sheet>
                <chatter/>
<!--                <div class="oe_chatter">-->
<!--                    <field name="message_follower_ids" widget="mail_followers"/>-->
<!--                    <field name="activity_ids" widget="mail_activity"/>-->
<!--                    <field name="message_ids" widget="mail_thread" />-->
<!--                </div>-->
            </form>
        </field>
    </record>

    <record id="ticket_it_admin_view_tree" model="ir.ui.view">
        <field name="name">it.helpdesk.ticket.admin.view.tree</field>
        <field name="model">seta.it.helpdesk</field>
        <field name="groups_id" eval="[(6, 0, [ref('group_it_helpdesk_internal_user')])]"/>
        <field name="arch" type="xml">
            <list import="false" create='true' edit="0" duplicate="0" delete="0" >
                <field name="number"/>
                <field name="name"/>
                <field name="user_id"/>
                <field name="stage_id"/>
                <field name="priority" widget="priority" options="{'clickable': False}" />
                <field name="urgency" widget="priority" options="{'clickable': False}" />
                <field name="impact" widget="priority" options="{'clickable': False}" />
                <field name="create_date" readonly="1"/>
                <field name="last_stage_update"/>
            </list>
        </field>
    </record>

    <record id="it_helpdesk_admin_ticket_action" model="ir.actions.act_window">
            <field name="name">Tickets</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">seta.it.helpdesk</field>
            <field name="view_mode">list,kanban,form,pivot</field>
            <field name="domain">[('is_it_helpdesk','=',True)]</field>
            <field name="context">{'default_is_it_helpdesk': True,'search_default_mytickets': 1}</field>
        </record>
<!--<record id="helpdesk_mgmt.helpdesk_ticket_action"  model="ir.actions.act_window">-->
<!--            <field name="name">Tickets</field>-->
<!--            <field name="type">ir.actions.act_window</field>-->
<!--            <field name="res_model">helpdesk.ticket</field>-->
<!--            <field name="view_mode">tree,kanban,form,pivot</field>-->
<!--            <field name="context">{'search_default_mytickets': 1}</field>-->
<!--        </record>-->
    <record id="action_ticket_it_admin_tree_view" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">list</field>
			<field name="sequence">1</field>
            <field name="view_id" ref="ticket_it_admin_view_tree"/>
            <field name="act_window_id" ref="it_helpdesk_admin_ticket_action"/>
        </record>

	<record id="action_ticket_it_admin_view_form" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
			<field name="sequence">2</field>
            <field name="view_id" ref="ticket_it_admin_view_form"/>
            <field name="act_window_id" ref="it_helpdesk_admin_ticket_action"/>
        </record>


     <record id="view_it_helpdesk_ticket_kanban" model="ir.ui.view">
        <field name="name">it.helpdesk.ticket.kanban</field>
        <field name="model">seta.it.helpdesk</field>
        <field name="priority" eval="100" />
        <field name="arch" type="xml">
            <kanban class="o_kanban_mobile" group_create="false" group_delete="false" default_group_by="stage_id" records_draggable="0" create="false">
<!--                <field name="is_in_transferred_stage" invisible="1" />-->
                <field name="number" />
<!--                <field name="active" />-->
                <field name="name" />
                <field name="partner_name" />
                <field name="user_id" />
                <field name="sequence" />
                <field name="color" />
                <field name="stage_id"/>
                <field name="priority" widget="priority" />
                <field name="assigned_date" />
                <progressbar
                    field="activity_state"
                    colors="{&quot;planned&quot;: &quot;success&quot;, &quot;today&quot;: &quot;warning&quot;, &quot;overdue&quot;: &quot;danger&quot;}"
                />
                <templates>
                    <t t-name="kanban-box">
                        <div
                            t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_content oe_kanban_global_click"
                        >
                            <div class="o_kanban_record_top">
                                <div class="o_kanban_record_headings">
                                    <field name="name" />
                                    <field
                                        name="tag_ids"
                                        widget="many2many_tags"
                                        options="{'color_field': 'color'}"
                                    />
                                    <field name="number" />
                                    <small class="o_kanban_record_subtitle text-muted">
                                        <field name="partner_id" />
                                    </small>
                                </div>
                                <div
                                    class="o_dropdown_kanban dropdown"
                                    t-if="!selection_mode"
                                    groups="base.group_user"
                                >
                                    <a
                                        role="button"
                                        class="dropdown-toggle o-no-caret btn"
                                        data-toggle="dropdown"
                                        data-display="static"
                                        href="#"
                                        aria-label="Dropdown menu"
                                        title="Dropdown menu"
                                    >
                                        <span class="fa fa-ellipsis-v" />
                                    </a>
                                    <div class="dropdown-menu" role="menu">
                                        <a
                                            t-if="widget.editable"
                                            role="menuitem"
                                            type="edit"
                                            class="dropdown-item"
                                        >Edit</a>
                                        <a
                                            t-if="widget.deletable"
                                            role="menuitem"
                                            type="delete"
                                            class="dropdown-item"
                                        >Delete</a>
                                        <div
                                            role="separator"
                                            class="dropdown-divider"
                                        />
                                        <ul
                                            class="oe_kanban_colorpicker"
                                            data-field="color"
                                        />
                                    </div>
                                </div>
                            </div>
                            <div class="o_kanban_record_body" />
                            <div class="o_kanban_record_bottom">
                                <div class="oe_kanban_bottom_left">
                                    <field name="priority" widget="priority" />
                                    <field
                                        name="activity_ids"
                                        widget="kanban_activity"
                                        related="activity_state"
                                    />
                                </div>
                                <div class="oe_kanban_bottom_right">
                                    <field
                                        name="kanban_state"
                                        widget="state_selection"
                                    />
                                    <field name="activity_state" invisible="1" />
                                    <img
                                        t-att-src="kanban_image('res.users', 'image_128', record.user_id.raw_value)"
                                        t-att-title="record.user_id.value"
                                        width="24"
                                        height="24"
                                        class="oe_kanban_avatar o_image_24_cover float-right"
                                        t-att-alt="record.user_id.value"
                                    />
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
    <record id="it_helpdesk_ticket_views_pivot" model="ir.ui.view">
        <field name="name">it.helpdesk.ticket.view.pivot</field>
        <field name="model">seta.it.helpdesk</field>
        <field name="arch" type="xml">
            <pivot string="Pivot Analysis" disable_linking="True">
                <field name="it_team_id" type="row" />
                <field name="assigned_date" type="col" />
            </pivot>
        </field>
    </record>



<!--    <record id="action_ticket_it_int_view_tree" model="ir.actions.act_window.view">-->
<!--            <field eval="1" name="sequence"/>-->
<!--            <field name="view_mode">tree</field>-->
<!--			<field name="sequence">1</field>-->
<!--            <field name="view_id" ref="ticket_it_int_view_tree"/>-->
<!--            <field name="act_window_id" ref="helpdesk_mgmt.helpdesk_ticket_action"/>-->
<!--        </record>-->

<!--	<record id="action_ticket_it_int_view_form" model="ir.actions.act_window.view">-->
<!--            <field eval="1" name="sequence"/>-->
<!--            <field name="view_mode">form</field>-->
<!--			<field name="sequence">2</field>-->
<!--            <field name="view_id" ref="ticket_it_int_view_form"/>-->
<!--            <field name="act_window_id" ref="helpdesk_mgmt.helpdesk_ticket_action"/>-->
<!--        </record>-->

<!--    team internal view form-->

<!--<record id="view_it_helpdesk_team_internal_form" model="ir.ui.view">-->
<!--        <field name="name">view.helpdesk_team.form</field>-->
<!--        <field name="model">helpdesk.ticket.team</field>-->
<!--        <field name="arch" type="xml">-->
<!--            <form string="Stages">-->
<!--                <header>-->
<!--                </header>-->
<!--                <sheet>-->
<!--                    <div class="oe_button_box" name="button_box">-->

<!--                    </div>-->
<!--                    <div class="oe_title">-->
<!--                        <label for="name" class="oe_edit_only"/>-->
<!--                        <h1><field name="name" required="1"/></h1>-->
<!--                    </div>-->
<!--                    <group name="main">-->
<!--                        <field name="user_ids" widget="many2many_tags" options="{'no_create': True, 'no_create_edit':True,'no_open':True}"/>-->
<!--                        <field name="company_id" groups="base.group_multi_company"/>-->
<!--                    </group>-->
<!--                    <group>-->
<!--                        <group name="left">-->
<!--                            <label for="alias_name" string="Email Alias"/>-->
<!--                            <div class="oe_inline" name="alias_def">-->
<!--                                <field name="alias_id" class="oe_read_only oe_inline"-->
<!--                                    string="Email Alias" required="0"/>-->
<!--                                <div class="oe_edit_only oe_inline" name="edit_alias" style="display: inline;" >-->
<!--                                    <field name="alias_name" class="oe_inline"/>@<field name="alias_domain" class="oe_inline" readonly="1"/>-->
<!--                                    <button  icon="fa-arrow-right" type="action" name="%(base_setup.action_general_configuration)d" string="Configure domain name" class="btn-link" invisible = "alias_domain != False"/>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <field name="alias_contact" class="oe_inline"-->
<!--                                string="Accept Emails From" />-->
<!--                        </group>-->
<!--                    </group>-->
<!--                </sheet>-->
<!--            </form>-->
<!--        </field>-->
<!--    </record>-->

<!--    <record id="view_it_helpdesk_internal_team_tree" model="ir.ui.view">-->
<!--        <field name="name">view.helpdesk_team.tree</field>-->
<!--        <field name="model">helpdesk.ticket.team</field>-->
<!--        <field name="arch" type="xml">-->
<!--            <tree string="Team">-->
<!--                <field name="name"/>-->
<!--                <field name="category_ids" widget="many2many_tags"/>-->
<!--                <field name="todo_ticket_count" string="Active tickets"/>-->
<!--                <field name="todo_ticket_count_unassigned" string="Unassigned tickets"/>-->
<!--                <field name="todo_ticket_count_unattended" string="Unattended tickets"/>-->
<!--                <field name="todo_ticket_count_high_priority" string="Priority tickets"/>-->
<!--            </tree>-->
<!--        </field>-->
<!--    </record>-->



<!--    <record id="action_ticket_it_team_int_view_tree" model="ir.actions.act_window.view">-->
<!--            <field name="view_mode">tree</field>-->
<!--			<field name="sequence">1</field>-->
<!--            <field name="view_id" ref="view_helpdesk_internal_team_tree"/>-->
<!--            <field name="act_window_id" ref="helpdesk_mgmt.helpdesk_ticket_team_action"/>-->
<!--        </record>-->
<!--	<record id="action_ticket_it_team_int_view_form" model="ir.actions.act_window.view">-->
<!--            <field name="view_mode">form</field>-->
<!--			<field name="sequence">2</field>-->
<!--            <field name="view_id" ref="view_helpdesk_team_internal_form"/>-->
<!--            <field name="act_window_id" ref="helpdesk_mgmt.helpdesk_ticket_team_action"/>-->
<!--        </record>-->

<record id="it_helpdesk_ticket_dashboard_action" model="ir.actions.act_window">
        <field name="name">Dashboard</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">it.helpdesk.ticket.team</field>
        <field name="view_mode">kanban,list,form,pivot</field>
    </record>

    <menuitem id="it_helpdesk_ticket_main_menu" name="IT Helpdesk" sequence="0"
            web_icon="helpdesk_mgmt,static/description/icon.png" groups="group_it_helpdesk_internal_user"/>


    <menuitem id="it_helpdesk_ticket_menu" name="Tickets"
        parent="it_helpdesk_ticket_main_menu" action="it_helpdesk_ticket_action" sequence="10"/>



    <menuitem id="it_helpdesk_admin_ticket_main_menu" name="IT Helpdesk Admin Center" sequence="0"
            web_icon="helpdesk_mgmt,static/description/icon.png" groups="group_it_helpdesk_Admin,group_it_helpdesk_manager"/>

    <menuitem
        id="it_helpdesk_ticket_dashboard_menu"
        name="Dashboard"
        parent="it_helpdesk_admin_ticket_main_menu"
        action="it_helpdesk_ticket_dashboard_action"
        sequence="9"
    />
    <menuitem id="it_helpdesk_admin_ticket_menu" name="Tickets"
        parent="it_helpdesk_admin_ticket_main_menu" action="it_helpdesk_admin_ticket_action" sequence="10"/>

    <menuitem
        id="it_helpdesk_ticket_config_main_menu"
        name="Configuration"
        parent="it_helpdesk_admin_ticket_main_menu"
        sequence="35"
        groups="group_it_helpdesk_manager"
    />




</odoo>